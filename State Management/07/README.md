# State Updates and Side Effects Task

## Бизнес-контекст
В современных веб-приложениях часто необходимо работать с асинхронными данными, обрабатывать состояния загрузки и ошибок, а также синхронизировать несколько источников данных. В этой задаче вам предстоит реализовать компонент управления данными пользователей с асинхронными обновлениями и побочными эффектами.

## Задача
Реализовать компонент UserDashboard, который загружает и отображает данные пользователей, позволяет их редактировать и синхронизирует изменения с сервером, обрабатывая различные состояния и ошибки.

### Функциональные требования

1. Загрузка данных:
   - Асинхронная загрузка списка пользователей при монтировании компонента
   - Отображение состояния загрузки (loading spinner или placeholder)
   - Обработка и отображение ошибок загрузки
   - Возможность повторить загрузку при ошибке

2. Управление пользователями:
   - Просмотр списка пользователей
   - Просмотр детальной информации о пользователе
   - Редактирование данных пользователя
   - Сохранение изменений на сервере
   - Отмена изменений и возврат к предыдущему состоянию

3. Синхронизация:
   - Периодическое обновление данных каждые 30 секунд
   - Оптимистичные обновления при редактировании
   - Обработка ошибок сохранения
   - Отмена незавершенных запросов при размонтировании

### Технические требования

1. State Management:
   - Использовать useReducer для управления состоянием
   - Реализовать все необходимые actions и обработчики
   - Обеспечить оптимистичные обновления UI
   - Реализовать откат состояния при ошибках

2. Side Effects:
   - Использовать useEffect для загрузки данных
   - Реализовать cleanup функции для эффектов
   - Обработать race conditions при асинхронных операциях
   - Реализовать отмену запросов при размонтировании

3. Error Handling:
   - Обработать все возможные ошибки API
   - Предоставить понятные сообщения об ошибках
   - Реализовать возможность повторить действие
   - Обеспечить graceful degradation

4. Performance:
   - Использовать useCallback для оптимизации
   - Предотвратить утечки памяти
   - Оптимизировать ре-рендеры
   - Использовать AbortController для отмены запросов

## Структура проекта

Проект содержит следующие файлы:

1. `/src/components/UserDashboard.tsx` - основной компонент (требует реализации)
2. `/src/hooks/useUsers.ts` - хук для работы с данными (требует реализации)
3. `/src/reducers/userReducer.ts` - редьюсер (предоставлен)
4. `/src/api/userApi.ts` - API клиент (предоставлен)
5. `/src/types/User.ts` - типы (предоставлены)
6. `/src/components/__tests__/UserDashboard.test.tsx` - тесты (предоставлены)

## Процесс выполнения

1. Изучите предоставленные типы и интерфейсы
2. Реализуйте хук useUsers:
   - Настройте useReducer
   - Реализуйте функции для работы с API
   - Добавьте обработку эффектов
   - Реализуйте отмену запросов

3. Реализуйте компонент UserDashboard:
   - Добавьте все необходимые состояния
   - Реализуйте обработчики событий
   - Добавьте обработку ошибок
   - Реализуйте UI компонента

4. Убедитесь, что все тесты проходят

## Критерии оценки

1. Функциональность (40%)
   - Все требования реализованы
   - Компонент работает корректно
   - Обработаны все ошибки
   - UI отзывчив и понятен

2. Качество кода (30%)
   - Код чистый и понятный
   - Используются правильные паттерны
   - Типы определены корректно
   - Нет утечек памяти

3. Тесты (30%)
   - Все тесты проходят
   - Покрыты все основные сценарии
   - Тесты понятны и поддерживаемы

## Полезные материалы
- [useEffect Hook](https://react.dev/learn/synchronizing-with-effects)
- [Fetching Data](https://react.dev/learn/synchronizing-with-effects#fetching-data)
- [Race Conditions](https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect)
- [Error Boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)
